
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>10. Integrität und Trigger &#8212; Online-Skript Grundlagen der Datenbanksysteme</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="11. Transaktionsmanagement" href="../11/transaktionen.html" />
    <link rel="prev" title="9. SQL" href="../09/sql.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/DBIS_Kurzlogo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Online-Skript Grundlagen der Datenbanksysteme</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Grundlagen der Datenbanksysteme
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../01/einfuehrung.html">
   1. Einführung
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../02/historie.html">
   2. Historie
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../03/architektur.html">
   3. Architektur
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04/phasenmodell_datenbankentwurf.html">
   4. Phasenmodell für den Datenbankentwurf
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../05/er_modellierung.html">
   5. ER-Modellierung
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06/relationaler_entwurf.html">
   6. Relationaler Entwurf
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07/normalisierung.html">
   7. Normalisierung
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../08/relationale_algebra.html">
   8. Relationale Algebra
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../09/sql.html">
   9. SQL
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   10. Integrität und Trigger
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../11/transaktionen.html">
   11. Transaktionsmanagement
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../12/bearbeitung.html">
   12. Bearbeitung
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/10/integritaet_und_trigger.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/LUH-DBS/GDBS_Script"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/LUH-DBS/GDBS_Script/issues/new?title=Issue%20on%20page%20%2F10/integritaet_und_trigger.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/LUH-DBS/GDBS_Script/main/?urlpath=tree/10/integritaet_und_trigger.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation-aktive-datenbanken">
   10.1. Motivation – Aktive Datenbanken
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#schlussel-und-fremdschlussel">
   10.2. Schlüssel und Fremdschlüssel
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#schlussel">
     10.2.1. Schlüssel
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#primarschlussel">
       10.2.1.1. Primärschlüssel
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sekundarschlussel">
       10.2.1.2. Sekundärschlüssel
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#schlusselbedingungen-erzwingen">
       10.2.1.3. Schlüsselbedingungen erzwingen
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fremdschlussel">
       10.2.1.4. Fremdschlüssel
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-table-beispiel">
     10.2.2. CREATE TABLE – Beispiel
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#referentielle-integritat-erzwingen">
     10.2.3. Referentielle Integrität erzwingen
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#referentielle-integritat-erzwingen-anderungen-ablehnen">
       10.2.3.1. Referentielle Integrität erzwingen: Änderungen Ablehnen
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#referentielle-integritat-erzwingen-kaskadierung">
       10.2.3.2. Referentielle Integrität erzwingen: Kaskadierung
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#referentielle-integritat-erzwingen-auf-null-setzen">
       10.2.3.3. Referentielle Integrität erzwingen: Auf NULL setzen
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       10.2.3.4. Referentielle Integrität erzwingen
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#integritatschecks-verschieben">
     10.2.4. Integritätschecks verschieben
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bedingungen-auf-attributen-und-tupel">
   10.3. Bedingungen auf Attributen und Tupel
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#not-null">
     10.3.1. NOT NULL
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#attribut-basierte-check-bedingungen">
     10.3.2. Attribut-basierte CHECK Bedingungen
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tupel-basierte-check-bedingungen">
     10.3.3. Tupel-basierte CHECK Bedingungen
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bedingungen-andern">
     10.3.4. Bedingungen ändern
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#zusicherungen-assertions-und-trigger">
   10.4. Zusicherungen(Assertions) und Trigger
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#assertions">
     10.4.1. Assertions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#assertions-beispiel">
       10.4.1.1. Assertions – Beispiel
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#unterschiede-der-check-bedingungen">
     10.4.2. Unterschiede der
     <code class="docutils literal notranslate">
      <span class="pre">
       CHECK
      </span>
     </code>
     Bedingungen
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trigger">
     10.4.3. Trigger
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trigger-in-sql">
     10.4.4. Trigger in SQL
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#trigger-beispiel">
       10.4.4.1. Trigger – Beispiel
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#trigger-alternative">
       10.4.4.2. Trigger  –  Alternative
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       10.4.4.3. Trigger - Beispiel
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#zusammenfassung">
   10.5. Zusammenfassung
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fragen">
   10.6. Fragen
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Integrität und Trigger</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation-aktive-datenbanken">
   10.1. Motivation – Aktive Datenbanken
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#schlussel-und-fremdschlussel">
   10.2. Schlüssel und Fremdschlüssel
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#schlussel">
     10.2.1. Schlüssel
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#primarschlussel">
       10.2.1.1. Primärschlüssel
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sekundarschlussel">
       10.2.1.2. Sekundärschlüssel
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#schlusselbedingungen-erzwingen">
       10.2.1.3. Schlüsselbedingungen erzwingen
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fremdschlussel">
       10.2.1.4. Fremdschlüssel
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-table-beispiel">
     10.2.2. CREATE TABLE – Beispiel
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#referentielle-integritat-erzwingen">
     10.2.3. Referentielle Integrität erzwingen
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#referentielle-integritat-erzwingen-anderungen-ablehnen">
       10.2.3.1. Referentielle Integrität erzwingen: Änderungen Ablehnen
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#referentielle-integritat-erzwingen-kaskadierung">
       10.2.3.2. Referentielle Integrität erzwingen: Kaskadierung
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#referentielle-integritat-erzwingen-auf-null-setzen">
       10.2.3.3. Referentielle Integrität erzwingen: Auf NULL setzen
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       10.2.3.4. Referentielle Integrität erzwingen
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#integritatschecks-verschieben">
     10.2.4. Integritätschecks verschieben
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bedingungen-auf-attributen-und-tupel">
   10.3. Bedingungen auf Attributen und Tupel
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#not-null">
     10.3.1. NOT NULL
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#attribut-basierte-check-bedingungen">
     10.3.2. Attribut-basierte CHECK Bedingungen
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tupel-basierte-check-bedingungen">
     10.3.3. Tupel-basierte CHECK Bedingungen
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bedingungen-andern">
     10.3.4. Bedingungen ändern
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#zusicherungen-assertions-und-trigger">
   10.4. Zusicherungen(Assertions) und Trigger
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#assertions">
     10.4.1. Assertions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#assertions-beispiel">
       10.4.1.1. Assertions – Beispiel
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#unterschiede-der-check-bedingungen">
     10.4.2. Unterschiede der
     <code class="docutils literal notranslate">
      <span class="pre">
       CHECK
      </span>
     </code>
     Bedingungen
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trigger">
     10.4.3. Trigger
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trigger-in-sql">
     10.4.4. Trigger in SQL
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#trigger-beispiel">
       10.4.4.1. Trigger – Beispiel
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#trigger-alternative">
       10.4.4.2. Trigger  –  Alternative
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       10.4.4.3. Trigger - Beispiel
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#zusammenfassung">
   10.5. Zusammenfassung
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fragen">
   10.6. Fragen
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="integritat-und-trigger">
<h1><span class="section-number">10. </span>Integrität und Trigger<a class="headerlink" href="#integritat-und-trigger" title="Permalink to this headline">¶</a></h1>
<p>In diesem Kapitel beschäftigen wir uns mit Integritätsbedingungen und Triggern.</p>
<div class="section" id="motivation-aktive-datenbanken">
<h2><span class="section-number">10.1. </span>Motivation – Aktive Datenbanken<a class="headerlink" href="#motivation-aktive-datenbanken" title="Permalink to this headline">¶</a></h2>
<p>Die Daten, die wir in eine Datenbank einfügen wollen können fehlerhaft sein, es kann sich um typographische Fehler, logische Fehler oder auch Andere handeln. Um den Fehlern entgegenzuwirken wäre eine Möglichkeit , das Schreiben besserer Anwendungen, jedoch ist das Prüfen der Konsistenz und Korrektheit sehr schwer, da z.B komplexe Bedingungen, schon abhängig von vorhandenen Daten sein können. Eine andere Möglichkeit ist das Benutzen von aktiven Elementen im DBMS wie Integritätsbedingungen (integrity constraints, ICs), die einmal spezifiziert und wenn nötig dann ausgeführt werden. Integritätsbedingungen “bewachen”, dass nur Daten die der spezifizierten Form entsprechen, zugelassen werden.</p>
</div>
<div class="section" id="schlussel-und-fremdschlussel">
<h2><span class="section-number">10.2. </span>Schlüssel und Fremdschlüssel<a class="headerlink" href="#schlussel-und-fremdschlussel" title="Permalink to this headline">¶</a></h2>
<p>In diesem Kapitel beschäftigen wir uns mit der am häufigsten genutzten Integritätsbedingung, Schlüssel. Zunächst werden wir die verschiedenen Arten von Schlüsseln (Primär-, Sekundärschlüssel, Fremdschlüssel) kennenlernen und anschließend wie diese Schlüsselbedingungen und referentielle Integrität erzwungen werden.</p>
<div class="section" id="schlussel">
<h3><span class="section-number">10.2.1. </span>Schlüssel<a class="headerlink" href="#schlussel" title="Permalink to this headline">¶</a></h3>
<p>Die einfachtse und am häufigsten genutzte Bedingung sind Schlüssel. Schlüssel sollten aus den vorherigen Kapiteln bekannt sein, sie bilden sich aus ein oder mehreren Attributen und identifizieren eindeutig ein Tupel. Falls eine Schlüsselmenge S gegeben ist, müssen sich also zwei Tupel einer Relation in mindestens einem Attributwert der Schlüsselmenge unterscheiden.
<br>
<br>
Schlüssel werden im <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> Ausdruck spezifiziert. Der Primärschlüssel wird mit dem Schlüsselwort <code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code> gekennzeichnet und kann nie einen Nullwert enthalten. Es gibt pro Relation maximal einen <code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code>. Ein weiterer Schlüssel ist <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code>, hiervon ist es erlaubt mehrere pro Relation und auch Nullwerte zu haben. Falls <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code> ohne Nullwerte benutzt werden soll, ist dies mit <code class="docutils literal notranslate"><span class="pre">UNIQUE</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code> möglich.</p>
<div class="section" id="primarschlussel">
<h4><span class="section-number">10.2.1.1. </span>Primärschlüssel<a class="headerlink" href="#primarschlussel" title="Permalink to this headline">¶</a></h4>
<p>Primaärschlüssel werden im <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> Ausdruck spezifiziert. Im Folgenden finden Sie eine Deklaration eines Primärschlüssels bei genau einem Attribut, dort findet die Deklaration dirket in der Attributenliste statt. Es ist auch möglich bei nur einem Attribut die Deklaration nach den Attributen zu nennen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">SchauspielerIn</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="n">Geschlecht</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="n">Geburtstag</span> <span class="n">DATE</span><span class="p">);</span>
</pre></div>
</div>
<p>Bei mehreren Attributen findet die Deklaration zwingend nach den Attributen statt, wie im Beispiel unten gezeigt.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">SchauspielerIn</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="n">Geschlecht</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="n">Geburtstag</span> <span class="n">DATE</span><span class="p">,</span>
<span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">Name</span><span class="p">,</span> <span class="n">Adresse</span><span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="sekundarschlussel">
<h4><span class="section-number">10.2.1.2. </span>Sekundärschlüssel<a class="headerlink" href="#sekundarschlussel" title="Permalink to this headline">¶</a></h4>
<p>Sekundärschlüssel bzw. Schlüsselkandidaten werden mit dem Schlüsseltwort <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code> spezifiziert. Die Sytax ist genau wie bei der Deklaration von einem <code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code>, also direkt beim Attribut oder als separate Attributliste nach den Attributen.
<br><br>
Der große Unterschied zu <code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code>  ist, dass es mehrere <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code> Deklarationen geben darf. Standardmäßig erlaubt <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code> <code class="docutils literal notranslate"><span class="pre">NULL</span></code>-Werte, da von <code class="docutils literal notranslate"><span class="pre">NULL</span></code> ≠ <code class="docutils literal notranslate"><span class="pre">NULL</span></code> (bzw. <code class="docutils literal notranslate"><span class="pre">UNKNOWN</span></code>) ausgegangen wird. Bei <code class="docutils literal notranslate"><span class="pre">NULL</span></code> ist es also möglich, dass zwei Tupel in <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code> Attributen übereinstimmen. Um auch Nullwerte zu unterbinden, kann <code class="docutils literal notranslate"><span class="pre">UNIQUE</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code> verwendet werden. Ein Beispiel für eine Deklaration eines Sekundärschlüssel befindet sich unten.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">SchauspielerIn</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="n">Geschlecht</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="n">Geburtstag</span> <span class="n">DATE</span> <span class="n">UNIQUE</span><span class="p">,</span>
<span class="n">UNIQUE</span> <span class="p">(</span><span class="n">Name</span><span class="p">,</span> <span class="n">Adresse</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="schlusselbedingungen-erzwingen">
<h4><span class="section-number">10.2.1.3. </span>Schlüsselbedingungen erzwingen<a class="headerlink" href="#schlusselbedingungen-erzwingen" title="Permalink to this headline">¶</a></h4>
<p>Die spezifizierten Schlüsselbedingungen müssen stets gelten. Diese sind nur relevant bei <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> und <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>, da bei <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> keine Verletzung der Bedingungen passieren kann, denn es wurden keine Tupel der Relation hinzugefügt, die nicht den Bedingungen entsprechen. Beim Einfügen oder Ändern wird geprüft der neue Schlüsselwert bereits vorhanden ist.</p>
<p>Meistens ist die effiziente Prüfung der Bedingungen mittels Index möglich, da DBMS in der Regel automatisch Indizes für Primärschlüsselattribute anlegen. Optional ist es auch möglich manuell für <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code>-Attribute Indizes zu erstellen, z.B <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">UNIQUE</span> <span class="pre">INDEX</span> <span class="pre">JahrIndex</span> <span class="pre">ON</span> <span class="pre">Filme(Jahr)</span></code>. Das entspricht <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">INDEX</span> <span class="pre">JahrIndex</span> <span class="pre">ON</span> <span class="pre">Filme(Jahr)</span></code>, aber mit einer neuen <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code> Bedingung auf Jahr.
<br><br>
Ohne Indizes ist die Überprüfung eher ineffizient, da die gesamte Spalte durchsucht werden muss. Sind die Daten sortiert, kann binäre Suche verwendet werden, andernfalls muss sequentielle Suche benutzt werden.</p>
</div>
<div class="section" id="fremdschlussel">
<h4><span class="section-number">10.2.1.4. </span>Fremdschlüssel<a class="headerlink" href="#fremdschlussel" title="Permalink to this headline">¶</a></h4>
<p>Ein Attribut oder eine Attributmenge kann als <code class="docutils literal notranslate"><span class="pre">FOREIGN</span> <span class="pre">KEY</span></code> deklariert werden, wenn die Attributmenge eine entsprechende Attributmenge einer zweiten Relation referenziert. So müssen gemeinsame Werte der Fremdschlüsselattribute auch als gemeinsame Werte des referenzierten Schlüssels auftauchen. Die referenzierte Attributmenge muss <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code> oder <code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code> sein. Haben wir z.B die zwei Relationen <code class="docutils literal notranslate"><span class="pre">ManagerIn(Name,</span> <span class="pre">Adresse,</span> <span class="pre">ManagerinID,</span> <span class="pre">Gehalt)</span></code> und <code class="docutils literal notranslate"><span class="pre">Studios(Name,</span> <span class="pre">Adresse,</span> <span class="pre">VorsitzendeID)</span></code>, dann wäre es sinnvoll, dass der Attributwert für <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> auf einen bestimmten, vorhandenen Manager verweist. Im Vergleich zu normalen Schlüsseln, darf ein Fremdschlüssel den Wert <code class="docutils literal notranslate"><span class="pre">NULL</span></code> annehmen. Das verwiesende Schlüsselattribut muss jedoch nicht einen <code class="docutils literal notranslate"><span class="pre">NULL</span></code>-Wert besitzen (und darf es meist auch nicht), hier kann <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code> Abhilfe leisten. Bei Fremdschlüsseln muss referentielle Integrität beibehalten werden, da es sonst zu dangling tuples kommen kann. Folgend einige Beispiele für die Syntax von Fremdschlüsseln:
<br><br>
Auf einem Attribut:
<br></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REFERENCES</span> <span class="n">Relation</span><span class="p">(</span><span class="n">Attribut</span><span class="p">)</span>
</pre></div>
</div>
<br>
Auf (einem oder) mehreren Attributen:
<br>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FOREIGN</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">Attribute</span><span class="p">)</span> <span class="n">REFERENCES</span> <span class="n">Relation</span><span class="p">(</span><span class="n">Attribute</span><span class="p">)</span>
</pre></div>
</div>
<p>Seien die Relationen <code class="docutils literal notranslate"><span class="pre">ManagerIn(Name,</span> <span class="pre">Adresse,</span> <span class="pre">ManagerinID,</span> <span class="pre">Gehalt)</span></code> und <code class="docutils literal notranslate"><span class="pre">Studios(Name,</span> <span class="pre">Adresse,</span> <span class="pre">VorsitzendeID)</span></code> gegeben. Wir legen eine Fremdschlüssel für <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> an, der auf <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> verweist.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Studios</span><span class="p">(</span>
    <span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
    <span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
    <span class="n">VorsitzendeID</span> <span class="n">INT</span> <span class="n">REFERENCES</span> <span class="n">Manager</span><span class="p">(</span><span class="n">ManagerinID</span><span class="p">));</span>
    
<span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Studios</span><span class="p">(</span>
    <span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
    <span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
    <span class="n">VorsitzendeID</span> <span class="n">INT</span><span class="p">,</span>
    <span class="n">FOREIGN</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">VorsitzendeID</span><span class="p">)</span> <span class="n">REFERENCES</span>
<span class="n">ManagerIn</span><span class="p">(</span><span class="n">ManagerinID</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-table-beispiel">
<h3><span class="section-number">10.2.2. </span>CREATE TABLE – Beispiel<a class="headerlink" href="#create-table-beispiel" title="Permalink to this headline">¶</a></h3>
<p>In diesem Beispiel haben wir eine Mitarbeiterrelation mit verschiedenen Attributen gegeben. Die Schlüsselattribute eines Mitarbeiters sind Vor- und Nachname. Jeder Mitarbeiter muss Teil einer Abteilung sein, weshalb <code class="docutils literal notranslate"><span class="pre">DepID</span></code> auf eine vorhandene <code class="docutils literal notranslate"><span class="pre">ID</span></code> aus der Departmentrelation verweisen muss. Genauso müssen <code class="docutils literal notranslate"><span class="pre">ProjectName</span></code> und <code class="docutils literal notranslate"><span class="pre">ProjectYear</span></code> auf ein vorhandenes Projekt verweisen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Employee</span><span class="p">(</span>
    <span class="n">FirstName</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
    <span class="n">LastName</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
    <span class="n">City</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
    <span class="n">ZIP</span> <span class="n">INT</span><span class="p">,</span>
    <span class="n">Street</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
    <span class="n">ProjectName</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
    <span class="n">ProjectYear</span> <span class="n">INT</span><span class="p">,</span>
    <span class="n">DepID</span> <span class="n">INT</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
    <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">FirstName</span><span class="p">,</span><span class="n">LastName</span><span class="p">),</span>
    <span class="n">FOREIGN</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">DepID</span><span class="p">)</span> <span class="n">REFERENCES</span> <span class="n">Department</span><span class="p">(</span><span class="n">DepID</span><span class="p">),</span>
    <span class="n">FOREIGN</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">ProjectName</span><span class="p">,</span><span class="n">ProjectYear</span><span class="p">)</span>
        <span class="n">REFERENCES</span> <span class="n">Project</span><span class="p">(</span><span class="n">Name</span><span class="p">,</span> <span class="n">Year</span><span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="referentielle-integritat-erzwingen">
<h3><span class="section-number">10.2.3. </span>Referentielle Integrität erzwingen<a class="headerlink" href="#referentielle-integritat-erzwingen" title="Permalink to this headline">¶</a></h3>
<p>Es gibt drei Varianten um referentielle Integrität zu erzwingen: Ablehnung verletzender Änderungen (SQL default), Kaskadierung und Null-Werte.
<br><br>
Haben wir wieder die Relationen <code class="docutils literal notranslate"><span class="pre">ManagerIn(Name,</span> <span class="pre">Adresse,</span> <span class="pre">ManagerinID,</span> <span class="pre">Gehalt)</span></code> und <code class="docutils literal notranslate"><span class="pre">Studios(Name,</span> <span class="pre">Adresse,</span> <span class="pre">VorsitzenderID)</span></code> gegeben, wobei <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> auf <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> verweist.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Studios</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="n">VorsitzendeID</span> <span class="n">INT</span> <span class="n">REFERENCES</span> <span class="n">ManagerIn</span><span class="p">(</span><span class="n">ManagerinID</span><span class="p">));</span>
</pre></div>
</div>
<div class="section" id="referentielle-integritat-erzwingen-anderungen-ablehnen">
<h4><span class="section-number">10.2.3.1. </span>Referentielle Integrität erzwingen: Änderungen Ablehnen<a class="headerlink" href="#referentielle-integritat-erzwingen-anderungen-ablehnen" title="Permalink to this headline">¶</a></h4>
<p>Durch den von uns festgelegten Fremdschlüssel muss  es für jede <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> auch eine <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> geben. SQL lehnt per default Änderungen ab, die Fremdschlüsselbeziehungen verletzen.
<br>
Wenn ein <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">Studio</span></code> … mit einer neuen (nicht-<code class="docutils literal notranslate"><span class="pre">NULL</span></code>) <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> angefragt wird, die nicht in <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code> gespeichert ist, so wird dies abgelehnt.
<br><br>
Wenn ein <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> eines Studios mit einer neuen <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code>, die nicht in <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code> gespeichert ist, angefragt wird, so wird dies ebenfalls abgelehnt.
<br><br>
Wenn ein <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> eines <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code>-Tupels, dessen <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> auch eine (oder mehrere) <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> ist, so wird dieses auch abgelehnt.
<br><br>
Wenn ein <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> der <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> eines <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code>-Tupels angefragt wird, die auch eine (oder mehrere) <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> ist, so wird dies auch abgelehnt.</p>
</div>
<div class="section" id="referentielle-integritat-erzwingen-kaskadierung">
<h4><span class="section-number">10.2.3.2. </span>Referentielle Integrität erzwingen: Kaskadierung<a class="headerlink" href="#referentielle-integritat-erzwingen-kaskadierung" title="Permalink to this headline">¶</a></h4>
<p>Bei der Kaskadierung ist die Idee, dass Änderungen im Schlüssel im Fremdschlüssel nachgezogen werden. Bei Veränderung in der Schlüsselrelation, verändern sich auch die Werte der Fremdrelation mit.
<br><br>
Ein <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">Studio</span></code> … mit einer neuen (nicht-<code class="docutils literal notranslate"><span class="pre">NULL</span></code>) <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code>, die nicht in <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code> gespeichert ist wird weiterhin abgelehnt.
<br><br>
Ein <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> eines Studios mit einer neuen <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code>, die nicht in <code class="docutils literal notranslate"><span class="pre">Manager</span></code> gespeichert ist, wird auch weiterhin abgelehnt.
<br><br>
Ein <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> eines <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code>-Tupels, dessen <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> auch auf eine (oder mehrere) <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> ist, wird akzeptiert, aber alle abhängigen Studios werden ebenfalls gelöscht.
<br><br>
Ein <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> der <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> eines <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code>-Tupels, die auch eine (oder mehrere) <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> ist, wird akzeptiert, aber die <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code>s in <code class="docutils literal notranslate"><span class="pre">Studios</span></code> werden ebenfalls geändert.</p>
</div>
<div class="section" id="referentielle-integritat-erzwingen-auf-null-setzen">
<h4><span class="section-number">10.2.3.3. </span>Referentielle Integrität erzwingen: Auf NULL setzen<a class="headerlink" href="#referentielle-integritat-erzwingen-auf-null-setzen" title="Permalink to this headline">¶</a></h4>
<p>Bei der Behandlung mit <code class="docutils literal notranslate"><span class="pre">NULL</span></code>-Werten ist die Idee, dass bei Änderungen im Schlüssel der Wert des Fremdschlüssels auf <code class="docutils literal notranslate"><span class="pre">NULL</span></code> gesetzt wird.
<br><br>
Ein <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> Studio mit einer neuen (nicht-<code class="docutils literal notranslate"><span class="pre">NULL</span></code>) <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code>, die nicht in <code class="docutils literal notranslate"><span class="pre">Manager</span></code> gespeichert ist wird abgelehnt.
<br><br>
Ein <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> eines Studios mit einer neuen <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code>, die nicht in <code class="docutils literal notranslate"><span class="pre">Manager</span></code> gespeichert ist, wird auch weiterhin abgelehnt.
<br><br>
Ein <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> eines <code class="docutils literal notranslate"><span class="pre">Manager</span></code>-Tupels, dessen <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> auch eine (oder mehrere) <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> ist wird akzeptiert, aber die <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code>s aller abhängigen Studios werden auf <code class="docutils literal notranslate"><span class="pre">NULL</span></code> gesetzt.
<br><br>
Ein <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> der <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> eines <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code>-Tupels, die auch eine (oder mehrere) <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> ist, wird ebenfalls akzeptiert aber die <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code>s in <code class="docutils literal notranslate"><span class="pre">Studios</span></code> werden auf <code class="docutils literal notranslate"><span class="pre">NULL</span></code> gesetzt.</p>
</div>
<div class="section" id="id1">
<h4><span class="section-number">10.2.3.4. </span>Referentielle Integrität erzwingen<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>In bestimmten DBMS kann die Vorgehensweise individuell spezifiziert werden. Im unteren Beispiel legen wir beim Löschen Behandlung mit <code class="docutils literal notranslate"><span class="pre">NULL</span></code>-Werten und beim Ändern Kaskadierung fest. Hier wird eine “vorsichtige” Strategie verfolgt, denn die Studios werden nicht gelöscht und behalten falls möglich ihre <code class="docutils literal notranslate"><span class="pre">VorsitzendenID</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Studios</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="n">VorsitzendeID</span> <span class="n">INT</span> <span class="n">REFERENCES</span> <span class="n">ManagerIn</span><span class="p">(</span><span class="n">ManagerinID</span><span class="p">)</span>
<span class="n">ON</span> <span class="n">DELETE</span> <span class="n">SET</span> <span class="n">NULL</span>
<span class="n">ON</span> <span class="n">UPDATE</span> <span class="n">CASCADE</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="integritatschecks-verschieben">
<h3><span class="section-number">10.2.4. </span>Integritätschecks verschieben<a class="headerlink" href="#integritatschecks-verschieben" title="Permalink to this headline">¶</a></h3>
<p>Es ist nicht immer möglich, Tupel einzufügen, die der referentiellen Integrität gehorchen. Möchten wir beispielsweise ein neues Studio, namens Redlight mit Sitz in New York und mit <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> 23456, in unsere Relation <code class="docutils literal notranslate"><span class="pre">Studios</span></code> einfügen. Jedoch wurde die ManagerIn mit der ID 23456 noch nicht angelegt.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>INSERT INTO Studios
VALUES (‘Redlight‘, ‘New York‘, 23456);
</pre></div>
</div>
<p>Wir könnten stattdessen die <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> <code class="docutils literal notranslate"><span class="pre">NULL</span></code> lassen, welches auch erlaubt ist, da <code class="docutils literal notranslate"><span class="pre">NULL</span></code>-Werte nicht auf referentielle Integrität geprüft werden müssen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>INSERT INTO Studios(Name, Adresse)
VALUES (‘Redlight‘, ‘New York‘);
</pre></div>
</div>
<p>Später nach dem Einfügen des Managertupels mit der <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> 23456 können wir das Tupel aus der Studiosrelation updaten:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>UPDATE Studios SET VorsitzendeID = 23456
WHERE Name = ‘Redlight‘;
</pre></div>
</div>
<p>Eine schönere Lösung für dieses Problem wäre, erst den Manager und dann das Studio einzufügen.
<br><br>
Es kann der Fall auftreten, dass es zyklische referentielle Integritätsbedingungen gibt. Z.B könnten zusätzlich Manager*Innen nur Vorsitzende von Studios sein, also ist <code class="docutils literal notranslate"><span class="pre">ManagerinID</span></code> ein Fremdschlüssel und referenziert auf <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code>. So gilt die Fremdschlüsselbedingung in beide Richtungen. Es kann nach wie vor kein Studio ohne vorhandenes Managertupel eingefügt werden. Es kann nun auch keine <code class="docutils literal notranslate"><span class="pre">Manager\*in</span></code> ohne vorhandenes Studio eingefügt werden. Die Lösung für dieses Problem ist das Zusammenfassen mehrerer Änderungsoperationen zu einer „Transaktion“ (mehr dazu im Kapitel 11 „Transaktionsmanagement“) und dann das Verschieben der Integritätschecks bis ans Ende der Transaktion.
<br><br>
Dieser Constraint kann mit dem Schlüsselwort <code class="docutils literal notranslate"><span class="pre">DEFERRABLE</span></code> deklariert werden, um flexibler den Zeitpunk der Prüfung zu gestalten. <code class="docutils literal notranslate"><span class="pre">DEFERRABLE</span></code> lässt sich einmal in <code class="docutils literal notranslate"><span class="pre">INITIALLY</span> <span class="pre">DEFERRED</span></code> und <code class="docutils literal notranslate"><span class="pre">INITIALLY</span> <span class="pre">IMMEDIATE</span></code> teilen. Bei <code class="docutils literal notranslate"><span class="pre">INITIALLY</span> <span class="pre">DEFERRED</span></code> wird der Integritätscheck an das Ende der Transaktion, die aus mehreren Statements bestehen kann, verschoben. Bei <code class="docutils literal notranslate"><span class="pre">INITIALLY</span> <span class="pre">IMMEDIATE</span></code> wird zunächst nichts verschoben. In einer Transaktionssession kann nun durch <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">constraint</span> <span class="pre">DEFERRABLE/IMMEDIATE</span></code> das Verhalten temporär angepasst werden. <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">DEFERRABLE</span></code>, also dass die Bedingung bei jeder Änderung der Datenbank geprüft wird, ist default. Ein Beispiel für die Synatx zu <code class="docutils literal notranslate"><span class="pre">DEFERRABLE</span></code> finden Sie unten.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Studios</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
<span class="n">VorsitzendeID</span> <span class="n">INT</span> <span class="n">UNIQUE</span> <span class="n">REFERENCES</span> <span class="n">ManagerIn</span><span class="p">(</span><span class="n">ManagerinID</span><span class="p">)</span>
<span class="n">DEFERRABLE</span> <span class="n">INITIALLY</span> <span class="n">DEFERRED</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Obwohl Assertions zum SQL-Standard gehören, werden werden sie nur in sehr wenigen Datenbanken eingesetzt.</p>
</div>
</div>
<div class="section" id="bedingungen-auf-attributen-und-tupel">
<h2><span class="section-number">10.3. </span>Bedingungen auf Attributen und Tupel<a class="headerlink" href="#bedingungen-auf-attributen-und-tupel" title="Permalink to this headline">¶</a></h2>
<p>In diesem Kapitel werden weitere Arten der Nebenbedingungen, wie die Annahme bestimmter Werte untersagt wird, betrachtet. Zuerst beschäftigen wir uns mit Bedingungen auf einzelnen Attributen(<code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code> und <code class="docutils literal notranslate"><span class="pre">CHECK</span></code>) und anschließend mit Bedingungen für ganze Tupel, also auf das Schema(<code class="docutils literal notranslate"><span class="pre">CHECK</span></code>).</p>
<div class="section" id="not-null">
<h3><span class="section-number">10.3.1. </span>NOT NULL<a class="headerlink" href="#not-null" title="Permalink to this headline">¶</a></h3>
<p>Wird ein Attribut mit <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code> deklariert, so ist es nicht erlaubt für dieses Attribut den Wert <code class="docutils literal notranslate"><span class="pre">NULL</span></code> einzutragen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Studios</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
<span class="n">VorsitzendeID</span> <span class="n">INT</span> <span class="n">NOT</span> <span class="n">NULL</span>
<span class="n">REFERENCES</span> <span class="n">ManagerIn</span><span class="p">(</span><span class="n">ManagerinID</span><span class="p">)</span>
<span class="n">ON</span> <span class="n">UPDATE</span> <span class="n">CASCADE</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Für das obige Beispiel gilt mit den <code class="docutils literal notranslate"><span class="pre">NOT-NULL</span></code>-Bedingungen, dass das Einfügen eines Studios ohne einer Manager*in nicht mehr möglich ist und das jedes Studio eine Adresse haben muss. Somit ist die <code class="docutils literal notranslate"><span class="pre">Null</span></code>-Werte Strategie beim Löschen von Manager*innen nicht mehr möglich.</p>
</div>
<div class="section" id="attribut-basierte-check-bedingungen">
<h3><span class="section-number">10.3.2. </span>Attribut-basierte CHECK Bedingungen<a class="headerlink" href="#attribut-basierte-check-bedingungen" title="Permalink to this headline">¶</a></h3>
<p>Die <code class="docutils literal notranslate"><span class="pre">CHECK</span></code>-Bedingung verfeinert die erlaubten Werte für ein Attribut durch die Spezifikation einer Bedingung. Die Bedingung wie jedes mal geprüft, falls ein Attribut einen neuen Wert erhält, also bei <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> und <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>. Sie ist ähnlich zur <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>-Klausel, kann beliebig komplex sein und auch aus einer <code class="docutils literal notranslate"><span class="pre">SELECT…FROM…WHERE…</span></code> Anfrage bestehen. I.d.R. werden <code class="docutils literal notranslate"><span class="pre">CHECK</span></code>-Bedingungen benutzt um eine einfache Einschränkung der Werte durchzuführen. Falls die Bedingung nicht erfüllt wird, so scheitert die Änderung.
<br><br>
In diesem Beispiel wird gecheckt, ob die <code class="docutils literal notranslate"><span class="pre">VorsitztendeID</span> <span class="pre">&gt;=</span> <span class="pre">100000</span></code> ist, da kleinere Werte für die <code class="docutils literal notranslate"><span class="pre">VorsitzendeID</span></code> nicht erlaubt sind.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Studios</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
<span class="n">VorsitzendeID</span> <span class="n">INT</span> <span class="n">REFERENCES</span> <span class="n">ManagerIn</span><span class="p">(</span><span class="n">ManagerinID</span><span class="p">)</span>
<span class="n">CHECK</span> <span class="p">(</span><span class="n">VorsitzendeID</span> <span class="o">&gt;=</span> <span class="mi">100000</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>In diesem Beispiel wird gecheckt, ob das Geschlecht entsprechend dem Format (‘W‘, ‘M‘, ‘D‘) definiert ist.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CREATE TABLE SchauspielerIn (
Name CHAR(30),
Adresse VARCHAR(255),
Geschlecht CHAR(1) CHECK (Geschlecht IN (‘W‘, ‘M‘, ‘D‘)),
Geburtstag DATE );
</pre></div>
</div>
<p>Eine <code class="docutils literal notranslate"><span class="pre">CHECK</span></code> Bedingung darf sich auch auf andere Attribute beziehen, jedoch nur im Zusammenhang mit einer <code class="docutils literal notranslate"><span class="pre">SQL</span></code> Anfrage, wie im unteren Beispiel gezeigt.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Studios</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
<span class="n">VorsitzendeID</span> <span class="n">INT</span> <span class="n">CHECK</span> <span class="p">(</span>
<span class="n">VorsitzendeID</span> <span class="n">IN</span>
<span class="p">(</span><span class="n">SELECT</span> <span class="n">ManagerinID</span> <span class="n">FROM</span> <span class="n">ManagerIn</span><span class="p">))</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Auf diese Weise wird indirekt referentielle Integrität simuliert. Wenn hier ein <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> oder <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> auf der <code class="docutils literal notranslate"><span class="pre">Studios</span></code> Relation ausgeführt wird, wird der <code class="docutils literal notranslate"><span class="pre">CHECK</span></code> geprüft. Bei einem DELETE auf der <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code> Relation, wird der <code class="docutils literal notranslate"><span class="pre">CHECK</span></code> nicht geprüft, die <code class="docutils literal notranslate"><span class="pre">CHECK</span></code> Bedingung kann ungültig werden. D.h. andere Relationen kennen diese <code class="docutils literal notranslate"><span class="pre">CHECK</span></code> Bedingung nicht.</p>
</div>
<div class="section" id="tupel-basierte-check-bedingungen">
<h3><span class="section-number">10.3.3. </span>Tupel-basierte CHECK Bedingungen<a class="headerlink" href="#tupel-basierte-check-bedingungen" title="Permalink to this headline">¶</a></h3>
<p>Es ist auch möglich Bedingungen für ganze Tupel zu deklarieren. Eine <code class="docutils literal notranslate"><span class="pre">CHECK</span></code>-Bedingung kann wie Primär- und Fremdschlüsselbezeiehungen in der Liste der Attributen auftauchen und beliebige Bedingungen wie eine <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>-Klausel haben. Die deklarierten <code class="docutils literal notranslate"><span class="pre">CHECK</span></code>s werden bei jedem <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> und <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> eines Tupels geprüft.
<br><br>
Im unteren Beispiel wird geprüft, ob das Geschlecht ‘W’ ist oder ob die Anrede nicht mit ‘Fr’ beginnt.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CREATE TABLE SchauspielerIn (
Anrede CHAR(10),
Name CHAR(30) PRIMARY KEY,
Adresse VARCHAR(255),
Geschlecht CHAR(1) CHECK (Geschlecht IN (‘W‘, ‘M‘, ‘D‘)),
Geburtstag DATE,
CHECK (Geschlecht = ‚W‘ OR Anrede NOT LIKE ‚Fr%‘ ));
</pre></div>
</div>
<p>Eine <code class="docutils literal notranslate"><span class="pre">CHECK</span></code>-Bedingung wird nicht geprüft, wenn Inhalte einer Bezugsrelation verändert werden und somit die Bedingung nachträglich ungültig machen. Siehe im Beispiel mit der Tabelle <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code>. Um solchen Inkonsistenzen entgegen zu wirken, kann man <code class="docutils literal notranslate"><span class="pre">ASSERTIONS</span></code> (siehe nächster Abschnitt) definieren oder die Prüfung in die Anwendungslogik bringen.</p>
</div>
<div class="section" id="bedingungen-andern">
<h3><span class="section-number">10.3.4. </span>Bedingungen ändern<a class="headerlink" href="#bedingungen-andern" title="Permalink to this headline">¶</a></h3>
<p>Um Bedingungen nachträglich noch zu ändern, müssen diese einen Namen haben. Meistens vergeben DBMS sowieso interne, jedoch hässliche Namen. Beispiele hierfür finden Sie unten.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CREATE TABLE SchauspielerIn (
Anrede CHAR(19),
Name CHAR(30) CONSTRAINT NamePrimaer PRIMARY KEY,
Adresse VARCHAR(255),
Geschlecht CHAR(1) CONSTRAINT NichtGeschlechtslos
CHECK (Geschlecht IN (‚W‘, ‚M‘)),
Geburtstag DATE,
CONSTRAINT AnredeKorrektConstraint
CHECK (Geschlecht = ‚W‘ OR Anrede NOT LIKE ‚Frau%‘ );
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CONSTRAINT</span> <span class="n">MyConstraint</span> <span class="n">DEFERRED</span><span class="p">;</span>

<span class="n">SET</span> <span class="n">CONSTRAINT</span> <span class="n">MyConstraint</span> <span class="n">IMMEDIATE</span><span class="p">;</span>
</pre></div>
</div>
<p>Das Entfernen von <code class="docutils literal notranslate"><span class="pre">CONSTRAINTS</span></code> ist nach dem Schema <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">Relation</span> <span class="pre">DROP</span> <span class="pre">CONSTRAINT</span> <span class="pre">Name;</span></code> möglich.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">Schauspieler</span> <span class="n">DROP</span> <span class="n">CONSTRAINT</span> <span class="n">NamePrimaer</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">Schauspieler</span> <span class="n">DROP</span> <span class="n">CONSTRAINT</span> <span class="n">NichtGeschlechtslos</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">Schauspieler</span> <span class="n">DROP</span> <span class="n">CONSTRAINT</span> <span class="n">AnredeKorrekt</span><span class="p">;</span>
</pre></div>
</div>
<p>Das Hinzufügen ist nach dem Schema <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">Relation</span> <span class="pre">ADD</span> <span class="pre">CONSTRAINT</span> <span class="pre">Name</span> <span class="pre">...</span></code>;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ALTER TABLE Schauspieler ADD CONSTRAINT NamePrimaer PRIMARY KEY (Name);
ALTER TABLE Schauspieler ADD CONSTRAINT NichtGeschlechtslos CHECK (Geschlecht IN (‚W‘, ‚M‘));
ALTER TABLE Schauspieler ADD CONSTRAINT AnredeKorrekt CHECK (Geschlecht = ‚W‘ OR name NOT LIKE ‚Frau%‘ );
</pre></div>
</div>
<p>Es können nur Tupel-basierte Bedingungen nachträglich hinzugefügt werden, attribut-basierte Bedingungen nicht.</p>
</div>
</div>
<div class="section" id="zusicherungen-assertions-und-trigger">
<h2><span class="section-number">10.4. </span>Zusicherungen(Assertions) und Trigger<a class="headerlink" href="#zusicherungen-assertions-und-trigger" title="Permalink to this headline">¶</a></h2>
<p>Manchmal sollen sich Bedingungen nicht auf bestimmte Tupel beziehen, sondern auf der Schemaebene definiert werden (wie Relationen und Sichten). Solche Bedingungen nennen sich Assertions (Zusicherungen) und Trigger. Eine Assertion ist ein Boole‘scher SQL Ausdruck, der stets wahr sein muss. Die Handhabung von Assertions ist durch einen Admin sehr leicht, jedoch verlangsamen Assertions die Datenbank, da sie schwierig effizient zu implementieren sind.
Trigger (Auslöser) sind Aktionen, die bei bestimmten Ereignissen (<code class="docutils literal notranslate"><span class="pre">INSERTs</span></code>, …) ausgelöst werden, im Vergleich zu Assertions sind Trigger leichter effizient zu implementieren.</p>
<div class="section" id="assertions">
<h3><span class="section-number">10.4.1. </span>Assertions<a class="headerlink" href="#assertions" title="Permalink to this headline">¶</a></h3>
<p>Assertions werden nach dem folgenden Schema deklariert <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">ASSERTION</span> <span class="pre">Name</span> <span class="pre">CHECK</span> <span class="pre">(Bedingung)</span></code>. Die Bedingung muss stets gelten, auch schon bei der Erzeugung der Assertion. Änderungen, die die Assertion verletzen, werden abgewiesen.
<code class="docutils literal notranslate"><span class="pre">CHECK</span></code> Bedingungen innerhalb einer <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> - Anweisung können hingegen nachträglich ungültig werden!</p>
<div class="section" id="assertions-beispiel">
<h4><span class="section-number">10.4.1.1. </span>Assertions – Beispiel<a class="headerlink" href="#assertions-beispiel" title="Permalink to this headline">¶</a></h4>
<p>Haben wir die Relationen <code class="docutils literal notranslate"><span class="pre">ManagerIn(Name,</span> <span class="pre">Adresse,</span> <span class="pre">ManagerinID,</span> <span class="pre">Gehalt)</span></code> und <code class="docutils literal notranslate"><span class="pre">Studios(Name,</span> <span class="pre">Adresse,</span> <span class="pre">VorsitzendeID)</span></code> gegeben.
<br>
In diesem Beispiel wurde eine Assertion deklariert die nur Vorsitzende von <code class="docutils literal notranslate"><span class="pre">Studios</span></code> annimmt, die mindestens 1.000.000 verdienen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">ASSERTION</span> <span class="n">ReicheVorsitzende</span> <span class="n">CHECK</span>
<span class="p">(</span><span class="n">NOT</span> <span class="n">EXISTS</span>
<span class="p">(</span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="n">Studios</span><span class="p">,</span> <span class="n">ManagerIn</span>
<span class="n">WHERE</span> <span class="n">ManagerinID</span> <span class="o">=</span> <span class="n">VorsitzendeID</span>
<span class="n">AND</span> <span class="n">Gehalt</span> <span class="o">&lt;</span> <span class="mi">1000000</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Eine Alternative zu dem Beispiel oben, wäre ein <code class="docutils literal notranslate"><span class="pre">CHECK</span></code> innerhalb eines <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> … .Der Unterschied zu der Assertion oben ist, dass nachträgliche Änderungen an der Relation <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code> nicht mehr abgefangen werden können</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">Studios</span><span class="p">(</span>
<span class="n">Name</span> <span class="n">CHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
<span class="n">Adresse</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
<span class="n">VorsitzendeID</span> <span class="n">INT</span> <span class="n">REFERENCES</span> <span class="n">ManagerIn</span><span class="p">(</span><span class="n">ManagerinID</span><span class="p">),</span>
<span class="n">CHECK</span> <span class="p">(</span> <span class="n">VorsitzendeID</span> <span class="n">NOT</span> <span class="n">IN</span>
<span class="p">(</span><span class="n">SELECT</span> <span class="n">ManagerinID</span> <span class="n">FROM</span> <span class="n">ManagerIn</span>
<span class="n">WHERE</span> <span class="n">Gehalt</span> <span class="o">&lt;</span> <span class="mi">1000000</span><span class="p">))</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Haben wir nun die Relation <code class="docutils literal notranslate"><span class="pre">Filme(Titel,</span> <span class="pre">Jahr,</span> <span class="pre">Länge,</span> <span class="pre">inFarbe,</span> <span class="pre">StudioName,</span> <span class="pre">ProduzentID)</span></code> gegeben. Wir formulieren eine Assertion, die sicherstellt, dass die Gesamtlänge der von einem <code class="docutils literal notranslate"><span class="pre">Studio</span></code> produzierten Filme mind. 10000 Minuten beträgt.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">ASSERTION</span> <span class="n">NurGrosseStudios</span> <span class="n">CHECK</span>
<span class="p">(</span><span class="mi">10000</span> <span class="o">&lt;=</span> <span class="n">ALL</span>
<span class="p">(</span><span class="n">SELECT</span> <span class="n">SUM</span><span class="p">(</span><span class="n">Länge</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">Filme</span>
<span class="n">GROUP</span> <span class="n">BY</span> <span class="n">StudioName</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Alternativ wäre wieder ein <code class="docutils literal notranslate"><span class="pre">CHECK</span></code> beim Schema für die Relation <code class="docutils literal notranslate"><span class="pre">Filme</span></code> möglich.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CHECK</span> <span class="p">(</span><span class="mi">10000</span> <span class="o">&lt;=</span> <span class="n">ALL</span>
<span class="p">(</span><span class="n">SELECT</span> <span class="n">SUM</span><span class="p">(</span><span class="n">Länge</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">Filme</span>
<span class="n">GROUP</span> <span class="n">BY</span> <span class="n">StudioName</span><span class="p">)</span>
</pre></div>
</div>
<p>Der Unterschied im Vergleich zu der Assertion oben ist, dass beim Löschen eines Films die Bedingung nicht geprüft wird. Also ist es möglich, dass nachdem Filme aus der Relation <code class="docutils literal notranslate"><span class="pre">Filme</span></code> gelöscht wurden, es Studios gibt, die nicht mehr mind. 10000 Minuten Filmmaterial haben und dies nicht überprüft wird. Ebenso kann dies eim Studiowechsel eines Films nicht geprüft werden.</p>
<p>Zur Formulierung:</p>
<ul class="simple">
<li><p>Kein direkter Bezug zu Relationen, deshalb müssen Attribute und Relationen in einer SQL Anfrage eingeführt werden.</p></li>
<li><p>Um eine Assertion zu löschen wird mittels <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">ASSERTION</span> <span class="pre">Name-der-Assertion</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="unterschiede-der-check-bedingungen">
<h3><span class="section-number">10.4.2. </span>Unterschiede der <code class="docutils literal notranslate"><span class="pre">CHECK</span></code> Bedingungen<a class="headerlink" href="#unterschiede-der-check-bedingungen" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Constraint-Art</p></th>
<th class="head"><p>Wo spezifiziert?</p></th>
<th class="head"><p>Wann geprüft?</p></th>
<th class="head"><p>Gilt immer?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Attribut-basiertes</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHECK</span></code> Beim Attribut</p></td>
<td><p>Bei <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> in Relation oder <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> des Attributs</p></td>
<td><p>Nein, falls Subanfragen verwendet werden.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Tupel-basiertes <code class="docutils literal notranslate"><span class="pre">CHECK</span></code></strong></p></td>
<td><p>Teil des Relationenschemas</p></td>
<td><p>Bei <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> oder <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> eines Tupels</p></td>
<td><p>Nein, falls Subanfragen verwendet werden.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Assertion</strong></p></td>
<td><p>Teil des Datenbankschemas</p></td>
<td><p>Beliebige Änderung auf einer erwähnten Relation</p></td>
<td><p>Ja</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="trigger">
<h3><span class="section-number">10.4.3. </span>Trigger<a class="headerlink" href="#trigger" title="Permalink to this headline">¶</a></h3>
<p>Trigger sind so genannte Event-Condition-Action Rules (ECA-Rules). Der Unterschied zu Zusicherungen ist, dass Trigger nicht immer gelten müssen, sondern sie werden nur bei bestimmten Ereignissen (<code class="docutils literal notranslate"><span class="pre">INSERT</span></code>, <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, Ende einer Transaktion) ausgeführt. Ein Ereignis wird zunächst nicht verhindert, sondern es wird lediglich eine bestimmte Bedingung geprüft. Falls die Triggerbedingung falsch ist passiert nichts weiter. Falls sie wahr ist, wird eine Aktion ausgeführt. Die Aktion könnte das Ereignis verhindern oder rückgängig machen oder auch etwas völlig anderes tun.</p>
</div>
<div class="section" id="trigger-in-sql">
<h3><span class="section-number">10.4.4. </span>Trigger in SQL<a class="headerlink" href="#trigger-in-sql" title="Permalink to this headline">¶</a></h3>
<p>Die ausgelöste Aktion durch Trigger kann sowohl vor oder nach dem Ereignis ausgeführt werden. Die Aktion kann sich auf alte und/oder neue Werte von Tupeln beziehen, die beim Ereignis eingefügt, verändert oder gelöscht werden. Mit <code class="docutils literal notranslate"><span class="pre">WHEN</span></code> können neben dem Ereignis auch weitere Bedingungen angegeben werden, die gelten müssen um die Aktion durchzuführen. Die Aktion kann einmal für jedes veränderte Tupel oder einmalig für alle Tupel, die verändert wurden ausgeführt werden.</p>
<div class="section" id="trigger-beispiel">
<h4><span class="section-number">10.4.4.1. </span>Trigger – Beispiel<a class="headerlink" href="#trigger-beispiel" title="Permalink to this headline">¶</a></h4>
<p>Hier finden Sie ein Beispiel für einen Trigger, welcher verhindert, dass Manager*innengehälter nicht gesenkt werden. Nach jedem Update von Gehalt der <code class="docutils literal notranslate"><span class="pre">ManagerIn</span></code> Relation, wird das alte Gehalt mit dem neuen verglichen und wenn das alte größer war, wird das Gehalt des betroffenen Tupels wieder auf das Alte gesetzt. Das Rekursionsverhalten ist DBMS-Hersteller-spezifisch.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TRIGGER</span> <span class="n">GehaltsTrigger</span> <span class="o">--</span><span class="n">Name</span> <span class="n">des</span> <span class="n">Triggers</span>
<span class="n">AFTER</span> <span class="n">UPDATE</span> <span class="n">OF</span> <span class="n">Gehalt</span> <span class="n">ON</span> <span class="n">ManagerIn</span> <span class="o">--</span><span class="n">Ereignis</span>
<span class="n">REFERENCING</span>
    <span class="n">OLD</span> <span class="n">ROW</span> <span class="n">AS</span> <span class="n">AltesTupel</span><span class="p">,</span>
    <span class="n">NEW</span> <span class="n">ROW</span> <span class="n">AS</span> <span class="n">NeuesTupel</span>
<span class="n">FOR</span> <span class="n">EACH</span> <span class="n">ROW</span> <span class="o">--</span><span class="n">Für</span> <span class="n">jedes</span> <span class="n">veränderte</span> <span class="n">Tupel</span> <span class="n">einmal</span> <span class="n">durchführen</span>
<span class="n">WHEN</span> <span class="p">(</span><span class="n">AltesTupel</span><span class="o">.</span><span class="n">Gehalt</span> <span class="o">&gt;</span> <span class="n">NeuesTupel</span><span class="o">.</span><span class="n">Gehalt</span><span class="p">)</span> <span class="o">--</span><span class="n">Bedingung</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span>
    <span class="n">UPDATE</span> <span class="n">ManagerIn</span> <span class="o">--</span><span class="n">Aktion</span>
    <span class="n">SET</span> <span class="n">Gehalt</span> <span class="o">=</span> <span class="n">AltesTupel</span><span class="o">.</span><span class="n">Gehalt</span>
    <span class="n">WHERE</span> <span class="n">ManagerinID</span> <span class="o">=</span> <span class="n">NeuesTupel</span><span class="o">.</span><span class="n">ManagerinID</span><span class="p">;</span> <span class="o">--</span><span class="n">Nur</span> <span class="n">betroffenes</span> <span class="n">Tupel</span>
</pre></div>
</div>
</div>
<div class="section" id="trigger-alternative">
<h4><span class="section-number">10.4.4.2. </span>Trigger  –  Alternative<a class="headerlink" href="#trigger-alternative" title="Permalink to this headline">¶</a></h4>
<p>Anstelle von <code class="docutils literal notranslate"><span class="pre">AFTER</span></code> kann in einem Trigger <code class="docutils literal notranslate"><span class="pre">BEFORE</span></code> benutzt werden, ebenso könne die auslösenden Ereignisse <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>/<code class="docutils literal notranslate"><span class="pre">DELETE</span></code> auch ohne <code class="docutils literal notranslate"><span class="pre">OF</span></code> sein. Bei <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> gibt es kein <code class="docutils literal notranslate"><span class="pre">OLD</span> <span class="pre">ROW</span> <span class="pre">...</span></code> und bei <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> kein <code class="docutils literal notranslate"><span class="pre">NEW</span> <span class="pre">ROW</span> <span class="pre">...</span></code>, da es keine alten und neue Tupel gibt. Wenn FOR EACH ROW nicht explizit spezifizeirt ist, ist <code class="docutils literal notranslate"><span class="pre">FOR</span> <span class="pre">EACH</span> <span class="pre">STATEMENT</span></code> der Default, dann gilt <code class="docutils literal notranslate"><span class="pre">OLD</span> <span class="pre">TABLE</span></code> / <code class="docutils literal notranslate"><span class="pre">NEW</span> <span class="pre">TABLE</span></code>. Die <code class="docutils literal notranslate"><span class="pre">WHEN</span></code>-Klausel ist optional und es können mehrere SQL-Ausdrücke drin enthalten sein, die mit <code class="docutils literal notranslate"><span class="pre">BEGIN</span> <span class="pre">…</span> <span class="pre">END</span></code> umrahmt sind.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CREATE TRIGGER GehaltsTrigger                   --BEFORE
AFTER UPDATE OF Gehalt ON ManagerIn             --INSERT / DELETE (ohne OF…)
REFERENCING
    OLD ROW AS AltesTupel,                      --Bei INSERT nicht erlaubt
    NEW ROW AS NeuesTupel                       --Bei DELETE nicht erlaubt
FOR EACH ROW                                    --Default: FOR EACH STATEMENT Dann: OLD TABLE / NEW TABLE
WHEN (AltesTupel.Gehalt &gt; NeuesTupel.Gehalt)    --WHEN ist optional
    UPDATE ManagerIn                            --Auch mehrere SQL Ausdrücke (BEGIN … END)
    SET Gehalt = AltesTupel.Gehalt
    WHERE ManagerinID = NeuesTupel.ManagerinID;
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h4><span class="section-number">10.4.4.3. </span>Trigger - Beispiel<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>In diesem Beispiel sind mehrere SQL-Ausdrücke in der <code class="docutils literal notranslate"><span class="pre">WHEN</span></code>-Klausel enthalten. Dieser Trigger bewirkt, dass das Durchschnittsgehalt von Manager*innen nicht unter 500.000 sinkt. Es sind je ein Trigger für <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>, <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> und <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> nötig.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TRIGGER</span> <span class="n">DurchschnittsgehaltTrigger</span>
<span class="n">AFTER</span> <span class="n">UPDATE</span> <span class="n">OF</span> <span class="n">Gehalt</span> <span class="n">ON</span> <span class="n">ManagerIn</span>
<span class="n">REFERENCING</span>
    <span class="n">OLD</span> <span class="n">TABLE</span> <span class="n">AS</span> <span class="n">AlteTupel</span> <span class="o">--</span><span class="n">Enthält</span> <span class="n">nur</span> <span class="n">die</span> <span class="n">alten</span> <span class="n">bzw</span><span class="o">.</span> <span class="n">neuen</span> <span class="n">Tupel</span><span class="o">.</span>
    <span class="n">NEW</span> <span class="n">TABLE</span> <span class="n">AS</span> <span class="n">NeueTupel</span>
<span class="n">FOR</span> <span class="n">EACH</span> <span class="n">STATEMENT</span>  <span class="o">--</span><span class="n">Ausführung</span> <span class="n">nur</span> <span class="n">einmal</span><span class="p">,</span> <span class="n">egal</span> <span class="n">wie</span> <span class="n">viele</span> <span class="n">Tupel</span> <span class="n">betroffen</span><span class="o">.</span>
<span class="n">WHEN</span> <span class="p">(</span><span class="mi">500000</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">SELECT</span> <span class="n">AVG</span><span class="p">(</span><span class="n">Gehalt</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">ManagerIn</span><span class="p">))</span> <span class="o">--</span><span class="n">Wird</span> <span class="n">nach</span> <span class="n">dem</span> <span class="n">UPDATE</span> <span class="n">geprüft</span><span class="o">.</span>
<span class="n">BEGIN</span>
    <span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">ManagerIn</span>
        <span class="n">WHERE</span> <span class="p">(</span><span class="n">Name</span><span class="p">,</span> <span class="n">Adresse</span><span class="p">,</span> <span class="n">ManagerID</span><span class="p">,</span> <span class="n">Gehalt</span><span class="p">)</span> <span class="n">IN</span> <span class="n">NeueTupel</span><span class="p">;</span> <span class="o">--</span><span class="n">Es</span> <span class="n">werden</span> <span class="n">nur</span> <span class="n">veränderte</span> <span class="n">Tupel</span> <span class="n">entfernt</span> <span class="n">und</span> <span class="n">durch</span> <span class="n">die</span> <span class="n">alten</span> <span class="n">Tupel</span> <span class="n">ersetzt</span><span class="o">.</span>
    <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">ManagerIn</span>
        <span class="p">(</span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">AlteTupel</span><span class="p">)</span>
<span class="n">END</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="zusammenfassung">
<h2><span class="section-number">10.5. </span>Zusammenfassung<a class="headerlink" href="#zusammenfassung" title="Permalink to this headline">¶</a></h2>
<p>In diesem Kapitel haben wir uns mit verschiedenen Schlüsseln, wie <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code>(Sekundärschlüssel) und <code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY(Primärschlüssel)</span></code> beschäftigt. Weiterhin haben wir gelernt wie referentielle Integrität erhalten bleibt, mithilfe von Fremdschlüsselbeziehungen, in SQL <code class="docutils literal notranslate"><span class="pre">REFERENCES</span></code> und <code class="docutils literal notranslate"><span class="pre">FOREIGN</span> <span class="pre">KEY</span></code>. Wir haben auch gesehen wie Attribut-basierte und Tupel-basierte Assertions mit <code class="docutils literal notranslate"><span class="pre">CHECK</span></code> deklariert werden können. Zuletzt haben wir Triggers kennengelernt, welche nur zu bestimmten Ereignissen wie <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>,<code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> usw. ausgeführt werden.</p>
</div>
<div class="section" id="fragen">
<h2><span class="section-number">10.6. </span>Fragen<a class="headerlink" href="#fragen" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Die hier verwendete Version des Multiple-Choice-Trainers von EILD.nrw wird über GitHub-Pages gehostet und in das Skript eingebunden.</p></li>
<li><p>Alle Fragen und Kategorien befinden sich zurzeit in Überarbeitung und sind nicht final.</p></li>
<li><p><strong>Für den vollen Funktionsumfang wird empfohlen einen auf Firefox basierten Browser zu nutzen, ansonsten können  unerwünschte Nebeneffekte entstehen.</strong></p></li>
</ul>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="100%"
    height="800"
    src="https://luh-dbs.github.io/mct-trainer/#/quiz/categories/integritaetundtrigger"
    frameborder="0"
    allowfullscreen

></iframe>
</div></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "LUH-DBS/GDBS_Script",
            ref: "main/",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./10"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../09/sql.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">9. </span>SQL</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../11/transaktionen.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">11. </span>Transaktionsmanagement</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Prof. Dr. Ziawasch Abedjan<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>